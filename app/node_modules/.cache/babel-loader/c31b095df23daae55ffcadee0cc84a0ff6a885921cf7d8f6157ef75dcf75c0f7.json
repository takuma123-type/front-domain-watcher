{"ast":null,"code":"import _regeneratorRuntime from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Helmet,HelmetProvider}from\"react-helmet-async\";import{ChatRepository}from\"../../infrastructure/repositories/ChatRepository\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var meta={title:\"\",meta:[],link:[],style:[],script:[]};export default function Index(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),prompt=_useState2[0],setPrompt=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chatHistory=_useState4[0],setChatHistory=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var handleSend=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newMessage,chatRepo,data,updatedMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(loading||prompt.trim()===\"\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:newMessage={prompt:prompt,response:\"\"};setChatHistory([].concat(_toConsumableArray(chatHistory),[newMessage]));setPrompt(\"\");setLoading(true);chatRepo=new ChatRepository();_context.prev=7;_context.next=10;return chatRepo.post(prompt);case 10:data=_context.sent;updatedMessage=_objectSpread(_objectSpread({},newMessage),{},{response:data.response});setChatHistory(function(prev){return prev.map(function(msg,index){return index===prev.length-1?updatedMessage:msg;});});_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](7);console.error(\"Error:\",_context.t0);case 18:_context.prev=18;setLoading(false);return _context.finish(18);case 21:case\"end\":return _context.stop();}},_callee,null,[[7,15,18,21]]);}));return function handleSend(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(HelmetProvider,{children:/*#__PURE__*/_jsx(Helmet,_objectSpread({},meta))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-grow p-4 overflow-auto\",children:[chatHistory.map(function(chat,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end items-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-400 text-white p-3 rounded-xl shadow-md max-w-xs\",children:chat.prompt}),/*#__PURE__*/_jsx(\"img\",{src:\"/path/to/user/icon.png\"// ユーザーのアイコン\n,alt:\"User\",className:\"w-10 h-10 rounded-full ml-2\"})]}),chat.response&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-start items-start mt-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/path/to/partner/icon.png\"// 相手のアイコン\n,alt:\"Partner\",className:\"w-10 h-10 rounded-full mr-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-300 text-black p-3 rounded-xl shadow-md max-w-xs\",children:chat.response})]})]},index);}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader border-t-4 border-green-400 rounded-full w-8 h-8 animate-spin\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white flex items-center border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"flex-grow p-2 border rounded-lg mr-2\",value:prompt,onChange:function onChange(e){return setPrompt(e.target.value);},placeholder:\"Enter your prompt\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-400 text-white p-2 rounded-lg \".concat(loading?\"opacity-50 cursor-not-allowed\":\"\"),onClick:handleSend,disabled:loading,children:\"\\u9001\\u4FE1\"})]})]})]});}","map":{"version":3,"names":["React","useState","Helmet","HelmetProvider","ChatRepository","jsx","_jsx","jsxs","_jsxs","meta","title","link","style","script","Index","_useState","_useState2","_slicedToArray","prompt","setPrompt","_useState3","_useState4","chatHistory","setChatHistory","_useState5","_useState6","loading","setLoading","handleSend","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newMessage","chatRepo","data","updatedMessage","wrap","_callee$","_context","prev","next","trim","abrupt","response","concat","_toConsumableArray","post","sent","_objectSpread","map","msg","index","length","t0","console","error","finish","stop","apply","arguments","Fragment","children","className","chat","src","alt","value","onChange","e","target","placeholder","onClick","disabled"],"sources":["/usr/src/app/admin_front/src/components/pages/Index.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport { ChatRepository } from \"../../infrastructure/repositories/ChatRepository\";\n\nconst meta = {\n  title: \"\",\n  meta: [],\n  link: [],\n  style: [],\n  script: [],\n};\n\ninterface ChatMessage {\n  prompt: string;\n  response: string;\n}\n\nexport default function Index() {\n  const [prompt, setPrompt] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState<ChatMessage[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const handleSend = async () => {\n    if (loading || prompt.trim() === \"\") return;\n\n    const newMessage: ChatMessage = { prompt, response: \"\" };\n    setChatHistory([...chatHistory, newMessage]);\n    setPrompt(\"\");\n    setLoading(true);\n\n    const chatRepo = new ChatRepository();\n    try {\n      const data = await chatRepo.post(prompt);\n      const updatedMessage: ChatMessage = { ...newMessage, response: data.response };\n      setChatHistory((prev) => prev.map((msg, index) => index === prev.length - 1 ? updatedMessage : msg));\n    } catch (error) {\n      console.error(\"Error:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <HelmetProvider>\n        <Helmet {...meta}></Helmet>\n      </HelmetProvider>\n      <div className=\"flex flex-col h-screen bg-gray-100\">\n        <div className=\"flex flex-col flex-grow p-4 overflow-auto\">\n          {chatHistory.map((chat, index) => (\n            <div key={index} className=\"mb-4\">\n              {/* User message */}\n              <div className=\"flex justify-end items-end\">\n                <div className=\"bg-green-400 text-white p-3 rounded-xl shadow-md max-w-xs\">\n                  {chat.prompt}\n                </div>\n                <img\n                  src=\"/path/to/user/icon.png\" // ユーザーのアイコン\n                  alt=\"User\"\n                  className=\"w-10 h-10 rounded-full ml-2\"\n                />\n              </div>\n              {/* Partner message */}\n              {chat.response && (\n                <div className=\"flex justify-start items-start mt-2\">\n                  <img\n                    src=\"/path/to/partner/icon.png\" // 相手のアイコン\n                    alt=\"Partner\"\n                    className=\"w-10 h-10 rounded-full mr-2\"\n                  />\n                  <div className=\"bg-gray-300 text-black p-3 rounded-xl shadow-md max-w-xs\">\n                    {chat.response}\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n          {loading && (\n            <div className=\"flex justify-center items-center\">\n              <div className=\"loader border-t-4 border-green-400 rounded-full w-8 h-8 animate-spin\"></div>\n            </div>\n          )}\n        </div>\n        <div className=\"p-4 bg-white flex items-center border-t border-gray-200\">\n          <textarea\n            className=\"flex-grow p-2 border rounded-lg mr-2\"\n            value={prompt}\n            onChange={(e) => setPrompt(e.target.value)}\n            placeholder=\"Enter your prompt\"\n          />\n          <button\n            className={`bg-green-400 text-white p-2 rounded-lg ${loading ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\n            onClick={handleSend}\n            disabled={loading}\n          >\n            送信\n          </button>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}