{"ast":null,"code":"import _objectSpread from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Helmet,HelmetProvider}from\"react-helmet-async\";import{ChatRepository}from\"../../infrastructure/repositories/ChatRepository\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var meta={title:\"\",meta:[],link:[],style:[],script:[]};export default function Index(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),prompt=_useState2[0],setPrompt=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),response=_useState4[0],setResponse=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),chatHistory=_useState6[0],setChatHistory=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var handleSend=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var chatRepo,data,newMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(loading||prompt.trim()===\"\")){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setLoading(true);chatRepo=new ChatRepository();_context.prev=4;_context.next=7;return chatRepo.post(prompt);case 7:data=_context.sent;newMessage={prompt:prompt,response:data.response};setChatHistory([].concat(_toConsumableArray(chatHistory),[newMessage]));setResponse(data.response);setPrompt(\"\");_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);console.error(\"Error:\",_context.t0);setResponse(\"Error occurred\");case 18:_context.prev=18;setLoading(false);return _context.finish(18);case 21:case\"end\":return _context.stop();}},_callee,null,[[4,14,18,21]]);}));return function handleSend(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(HelmetProvider,{children:/*#__PURE__*/_jsx(Helmet,_objectSpread({},meta))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-grow p-4 overflow-auto\",children:[chatHistory.map(function(chat,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end ml-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 text-white p-3 rounded-xl rounded-br-none shadow-md max-w-xs\",children:chat.prompt}),/*#__PURE__*/_jsx(\"img\",{src:\"/path/to/user/icon.png\"// ユーザーのアイコン\n,alt:\"User\",className:\"w-10 h-10 rounded-full ml-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start mt-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/path/to/partner/icon.png\"// 相手のアイコン\n,alt:\"Partner\",className:\"w-10 h-10 rounded-full mr-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-300 text-black p-3 rounded-xl rounded-bl-none shadow-md max-w-xs\",children:chat.response})]})]},index);}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader border-t-4 border-blue-500 rounded-full w-8 h-8 animate-spin\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white flex items-center border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"flex-grow p-2 border rounded-lg mr-2\",value:prompt,onChange:function onChange(e){return setPrompt(e.target.value);},placeholder:\"Enter your prompt\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white p-2 rounded-lg \".concat(loading?\"opacity-50 cursor-not-allowed\":\"\"),onClick:handleSend,disabled:loading,children:\"\\u9001\\u4FE1\"})]})]})]});}","map":{"version":3,"names":["React","useState","Helmet","HelmetProvider","ChatRepository","jsx","_jsx","jsxs","_jsxs","meta","title","link","style","script","Index","_useState","_useState2","_slicedToArray","prompt","setPrompt","_useState3","_useState4","response","setResponse","_useState5","_useState6","chatHistory","setChatHistory","_useState7","_useState8","loading","setLoading","handleSend","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","chatRepo","data","newMessage","wrap","_callee$","_context","prev","next","trim","abrupt","post","sent","concat","_toConsumableArray","t0","console","error","finish","stop","apply","arguments","Fragment","children","_objectSpread","className","map","chat","index","src","alt","value","onChange","e","target","placeholder","onClick","disabled"],"sources":["/usr/src/app/admin_front/src/components/pages/Index.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport { ChatRepository } from \"../../infrastructure/repositories/ChatRepository\";\n\nconst meta = {\n  title: \"\",\n  meta: [],\n  link: [],\n  style: [],\n  script: [],\n};\n\ninterface ChatMessage {\n  prompt: string;\n  response: string;\n}\n\nexport default function Index() {\n  const [prompt, setPrompt] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState<ChatMessage[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const handleSend = async () => {\n    if (loading || prompt.trim() === \"\") return;\n\n    setLoading(true);\n    const chatRepo = new ChatRepository();\n    try {\n      const data = await chatRepo.post(prompt);\n      const newMessage: ChatMessage = { prompt, response: data.response };\n      setChatHistory([...chatHistory, newMessage]);\n      setResponse(data.response);\n      setPrompt(\"\");\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setResponse(\"Error occurred\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <HelmetProvider>\n        <Helmet {...meta}></Helmet>\n      </HelmetProvider>\n      <div className=\"flex flex-col h-screen bg-gray-100\">\n        <div className=\"flex flex-col flex-grow p-4 overflow-auto\">\n          {chatHistory.map((chat, index) => (\n            <div key={index} className=\"mb-4 flex\">\n              {/* User message */}\n              <div className=\"flex items-end ml-auto\">\n                <div className=\"bg-blue-500 text-white p-3 rounded-xl rounded-br-none shadow-md max-w-xs\">\n                  {chat.prompt}\n                </div>\n                <img\n                  src=\"/path/to/user/icon.png\" // ユーザーのアイコン\n                  alt=\"User\"\n                  className=\"w-10 h-10 rounded-full ml-2\"\n                />\n              </div>\n              {/* Partner message */}\n              <div className=\"flex items-start mt-2\">\n                <img\n                  src=\"/path/to/partner/icon.png\" // 相手のアイコン\n                  alt=\"Partner\"\n                  className=\"w-10 h-10 rounded-full mr-2\"\n                />\n                <div className=\"bg-gray-300 text-black p-3 rounded-xl rounded-bl-none shadow-md max-w-xs\">\n                  {chat.response}\n                </div>\n              </div>\n            </div>\n          ))}\n          {loading && (\n            <div className=\"flex justify-center items-center\">\n              <div className=\"loader border-t-4 border-blue-500 rounded-full w-8 h-8 animate-spin\"></div>\n            </div>\n          )}\n        </div>\n        <div className=\"p-4 bg-white flex items-center border-t border-gray-200\">\n          <textarea\n            className=\"flex-grow p-2 border rounded-lg mr-2\"\n            value={prompt}\n            onChange={(e) => setPrompt(e.target.value)}\n            placeholder=\"Enter your prompt\"\n          />\n          <button\n            className={`bg-blue-500 text-white p-2 rounded-lg ${loading ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\n            onClick={handleSend}\n            disabled={loading}\n          >\n            送信\n          </button>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}