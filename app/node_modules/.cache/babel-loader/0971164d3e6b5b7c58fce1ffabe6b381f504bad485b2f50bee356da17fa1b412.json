{"ast":null,"code":"import _objectSpread from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/usr/src/app/admin_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Helmet,HelmetProvider}from\"react-helmet-async\";import{ChatRepository}from\"../../infrastructure/repositories/ChatRepository\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var meta={title:\"\",meta:[],link:[],style:[],script:[]};export default function Index(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),prompt=_useState2[0],setPrompt=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),response=_useState4[0],setResponse=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),chatHistory=_useState6[0],setChatHistory=_useState6[1];var handleSend=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var chatRepo,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:chatRepo=new ChatRepository();_context.prev=1;_context.next=4;return chatRepo.post(prompt);case 4:data=_context.sent;setChatHistory([].concat(_toConsumableArray(chatHistory),[{prompt:prompt,response:data.response}]));setResponse(data.response);setPrompt(\"\");_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.error(\"Error:\",_context.t0);setResponse(\"Error occurred\");case 14:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleSend(){return _ref.apply(this,arguments);};}();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var chatRepo;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:chatRepo=new ChatRepository();_context2.next=3;return chatRepo.get();case 3:case\"end\":return _context2.stop();}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(HelmetProvider,{children:/*#__PURE__*/_jsx(Helmet,_objectSpread({},meta))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col flex-grow p-4 overflow-auto\",children:chatHistory.map(function(chat,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 text-white p-3 rounded-lg shadow-md w-fit self-start\",children:chat.prompt}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-300 text-black p-3 rounded-lg shadow-md w-fit self-end mt-2\",children:chat.response})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-white flex items-center border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"flex-grow p-2 border rounded-lg mr-2\",value:prompt,onChange:function onChange(e){return setPrompt(e.target.value);},placeholder:\"Enter your prompt\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white p-2 rounded-lg\",onClick:handleSend,children:\"Send\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Helmet","HelmetProvider","ChatRepository","jsx","_jsx","jsxs","_jsxs","meta","title","link","style","script","Index","_useState","_useState2","_slicedToArray","prompt","setPrompt","_useState3","_useState4","response","setResponse","_useState5","_useState6","chatHistory","setChatHistory","handleSend","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","chatRepo","data","wrap","_callee$","_context","prev","next","post","sent","concat","_toConsumableArray","t0","console","error","stop","apply","arguments","fetchData","_ref2","_callee2","_callee2$","_context2","get","Fragment","children","_objectSpread","className","map","chat","index","value","onChange","e","target","placeholder","onClick"],"sources":["/usr/src/app/admin_front/src/components/pages/Index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Helmet, HelmetProvider } from \"react-helmet-async\";\nimport { ChatRepository } from \"../../infrastructure/repositories/ChatRepository\";\n\nconst meta = {\n  title: \"\",\n  meta: [],\n  link: [],\n  style: [],\n  script: [],\n};\n\nexport default function Index() {\n  const [prompt, setPrompt] = useState(\"\");\n  const [response, setResponse] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([]);\n\n  const handleSend = async () => {\n    const chatRepo = new ChatRepository();\n    try {\n      const data = await chatRepo.post(prompt);\n      setChatHistory([...chatHistory, { prompt, response: data.response }]);\n      setResponse(data.response);\n      setPrompt(\"\");\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setResponse(\"Error occurred\");\n    }\n  };\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const chatRepo = new ChatRepository();\n      await chatRepo.get(); // ここに適切なデータを渡す\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <HelmetProvider>\n        <Helmet {...meta}></Helmet>\n      </HelmetProvider>\n      <div className=\"flex flex-col h-screen bg-gray-100\">\n        <div className=\"flex flex-col flex-grow p-4 overflow-auto\">\n          {chatHistory.map((chat, index) => (\n            <div key={index} className=\"mb-4\">\n              <div className=\"bg-blue-500 text-white p-3 rounded-lg shadow-md w-fit self-start\">\n                {chat.prompt}\n              </div>\n              <div className=\"bg-gray-300 text-black p-3 rounded-lg shadow-md w-fit self-end mt-2\">\n                {chat.response}\n              </div>\n            </div>\n          ))}\n        </div>\n        <div className=\"p-4 bg-white flex items-center border-t border-gray-200\">\n          <textarea\n            className=\"flex-grow p-2 border rounded-lg mr-2\"\n            value={prompt}\n            onChange={(e) => setPrompt(e.target.value)}\n            placeholder=\"Enter your prompt\"\n          />\n          <button\n            className=\"bg-blue-500 text-white p-2 rounded-lg\"\n            onClick={handleSend}\n          >\n            Send\n          </button>\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}