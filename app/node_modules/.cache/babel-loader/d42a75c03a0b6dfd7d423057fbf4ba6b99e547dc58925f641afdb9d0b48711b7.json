{"ast":null,"code":"import _regeneratorRuntime from\"/Users/takuma/Desktop/dev/aura-bot/react-api-chatgpt/admin_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/takuma/Desktop/dev/aura-bot/react-api-chatgpt/admin_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/takuma/Desktop/dev/aura-bot/react-api-chatgpt/admin_front/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/takuma/Desktop/dev/aura-bot/react-api-chatgpt/admin_front/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{API}from\"../API\";import{axiosClient}from\"../axiosClient\";import axios from\"axios\";import{UnauthorizedError,UnknownError}from\"./errors\";export var ChatRepository=/*#__PURE__*/function(){function ChatRepository(){_classCallCheck(this,ChatRepository);}_createClass(ChatRepository,[{key:\"post\",value:function(){var _post=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(prompt){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.post(API.createURL(API.URL.chat()),{prompt:prompt},{withCredentials:true,headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}});case 3:response=_context.sent;if(!(response&&response.status===200)){_context.next=6;break;}return _context.abrupt(\"return\",response.data);case 6:throw new UnknownError();case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);if(!(axios.isAxiosError(_context.t0)&&_context.t0.response&&_context.t0.response.status===401)){_context.next=13;break;}throw new UnauthorizedError();case 13:throw _context.t0;case 14:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));function post(_x){return _post.apply(this,arguments);}return post;}()}]);return ChatRepository;}();","map":{"version":3,"names":["API","axiosClient","axios","UnauthorizedError","UnknownError","ChatRepository","_classCallCheck","_createClass","key","value","_post","_asyncToGenerator","_regeneratorRuntime","mark","_callee","prompt","response","wrap","_callee$","_context","prev","next","post","createURL","URL","chat","withCredentials","headers","Accept","sent","status","abrupt","data","t0","isAxiosError","stop","_x","apply","arguments"],"sources":["/Users/takuma/Desktop/dev/aura-bot/react-api-chatgpt/admin_front/src/infrastructure/repositories/ChatRepository.ts"],"sourcesContent":["import { API } from \"../API\";\nimport { axiosClient } from \"../axiosClient\";\nimport axios from \"axios\";\nimport { UnauthorizedError, UnknownError } from \"./errors\";\n\nexport class ChatRepository {\n  async post(prompt: string): Promise<any> {\n    try {\n      const response = await axiosClient.post(\n        API.createURL(API.URL.chat()),\n        { prompt: prompt },\n        {\n          withCredentials: true,\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      if (response && response.status === 200) {\n        return response.data;\n      }\n\n      throw new UnknownError();\n    } catch (error) {\n      if (axios.isAxiosError(error) && error.response && error.response.status === 401) {\n        throw new UnauthorizedError();\n      }\n      throw error;\n    }\n  }\n}\n"],"mappings":"smBAAA,OAASA,GAAG,KAAQ,QAAQ,CAC5B,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,iBAAiB,CAAEC,YAAY,KAAQ,UAAU,CAE1D,UAAa,CAAAC,cAAc,kCAAAA,eAAA,EAAAC,eAAA,MAAAD,cAAA,GAAAE,YAAA,CAAAF,cAAA,GAAAG,GAAA,QAAAC,KAAA,gBAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CACzB,SAAAC,QAAWC,MAAc,MAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEE,CAAApB,WAAW,CAACqB,IAAI,CACrCtB,GAAG,CAACuB,SAAS,CAACvB,GAAG,CAACwB,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAC7B,CAAEV,MAAM,CAAEA,MAAO,CAAC,CAClB,CACEW,eAAe,CAAE,IAAI,CACrBC,OAAO,CAAE,CACPC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,QAVKZ,QAAQ,CAAAG,QAAA,CAAAU,IAAA,MAYVb,QAAQ,EAAIA,QAAQ,CAACc,MAAM,GAAK,GAAG,GAAAX,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAY,MAAA,UAC9Bf,QAAQ,CAACgB,IAAI,cAGhB,IAAI,CAAA5B,YAAY,CAAC,CAAC,QAAAe,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAc,EAAA,CAAAd,QAAA,kBAEpBjB,KAAK,CAACgC,YAAY,CAAAf,QAAA,CAAAc,EAAM,CAAC,EAAId,QAAA,CAAAc,EAAA,CAAMjB,QAAQ,EAAIG,QAAA,CAAAc,EAAA,CAAMjB,QAAQ,CAACc,MAAM,GAAK,GAAG,GAAAX,QAAA,CAAAE,IAAA,gBACxE,IAAI,CAAAlB,iBAAiB,CAAC,CAAC,eAAAgB,QAAA,CAAAc,EAAA,0BAAAd,QAAA,CAAAgB,IAAA,MAAArB,OAAA,gBAIlC,YAAAQ,KAAAc,EAAA,SAAA1B,KAAA,CAAA2B,KAAA,MAAAC,SAAA,UAAAhB,IAAA,eAAAjB,cAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}