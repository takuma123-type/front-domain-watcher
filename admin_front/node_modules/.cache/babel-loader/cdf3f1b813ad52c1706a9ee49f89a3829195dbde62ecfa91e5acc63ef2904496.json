{"ast":null,"code":"import { Storage } from \"../infrastructure/Storage\";\nimport { UnauthorizedError } from \"../infrastructure/repositories\";\nimport { UserItem } from \"../models/presentation/UserItem\";\nexport class FetchUsersOutput {\n  constructor(users) {\n    this.users = void 0;\n    this.users = users;\n  }\n}\nexport class FetchUsersUsecase {\n  constructor(usersRepository) {\n    this.usersRepository = void 0;\n    this.usersRepository = usersRepository;\n  }\n  async fetch() {\n    // セッショントークンの取得をコメントアウト\n    // const sessionToken = Storage.restoreSessionToken() || null;\n    // if (!sessionToken) {\n    //   return Promise.reject(new InvlalidSessionTokenError());\n    // }\n\n    try {\n      // `fetch` メソッドの呼び出し時にセッショントークンを渡さない\n      const data = await this.usersRepository.fetch( /*sessionToken*/);\n      const users = data.results.map(user => new UserItem({\n        id: user.id,\n        code: user.code,\n        name: user.name,\n        status: user.status,\n        email: user.email\n      }));\n      return new FetchUsersOutput(users);\n    } catch (e) {\n      if (e instanceof UnauthorizedError) {\n        Storage.clear();\n      }\n      throw e;\n    }\n  }\n}","map":{"version":3,"names":["Storage","UnauthorizedError","UserItem","FetchUsersOutput","constructor","users","FetchUsersUsecase","usersRepository","fetch","data","results","map","user","id","code","name","status","email","e","clear"],"sources":["/usr/src/app/admin_front/src/usecases/FetchUsersUsecase.tsx"],"sourcesContent":["import { Storage } from \"../infrastructure/Storage\";\nimport {\n  InvlalidSessionTokenError,\n  UsersRepository,\n  UnauthorizedError,\n} from \"../infrastructure/repositories\";\nimport { UserItem } from \"../models/presentation/UserItem\";\n\nexport class FetchUsersOutput {\n  readonly users: UserItem[];\n\n  constructor(users: UserItem[]) {\n    this.users = users;\n  }\n}\n\nexport class FetchUsersUsecase {\n  private usersRepository: UsersRepository;\n\n  constructor(usersRepository: UsersRepository) {\n    this.usersRepository = usersRepository;\n  }\n\n  async fetch(): Promise<FetchUsersOutput> {\n    // セッショントークンの取得をコメントアウト\n    // const sessionToken = Storage.restoreSessionToken() || null;\n    // if (!sessionToken) {\n    //   return Promise.reject(new InvlalidSessionTokenError());\n    // }\n\n    try {\n      // `fetch` メソッドの呼び出し時にセッショントークンを渡さない\n      const data = await this.usersRepository.fetch(/*sessionToken*/);\n      const users = data.results.map(\n        (user: any) =>\n          new UserItem({\n            id: user.id,\n            code: user.code,\n            name: user.name,\n            status: user.status,\n            email: user.email,\n          })\n      );\n      return new FetchUsersOutput(users);\n    } catch (e) {\n      if (e instanceof UnauthorizedError) {\n        Storage.clear();\n      }\n      throw e;\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,2BAA2B;AACnD,SAGEC,iBAAiB,QACZ,gCAAgC;AACvC,SAASC,QAAQ,QAAQ,iCAAiC;AAE1D,OAAO,MAAMC,gBAAgB,CAAC;EAG5BC,WAAWA,CAACC,KAAiB,EAAE;IAAA,KAFtBA,KAAK;IAGZ,IAAI,CAACA,KAAK,GAAGA,KAAK;EACpB;AACF;AAEA,OAAO,MAAMC,iBAAiB,CAAC;EAG7BF,WAAWA,CAACG,eAAgC,EAAE;IAAA,KAFtCA,eAAe;IAGrB,IAAI,CAACA,eAAe,GAAGA,eAAe;EACxC;EAEA,MAAMC,KAAKA,CAAA,EAA8B;IACvC;IACA;IACA;IACA;IACA;;IAEA,IAAI;MACF;MACA,MAAMC,IAAI,GAAG,MAAM,IAAI,CAACF,eAAe,CAACC,KAAK,CAAiB,CAAhB,iBAAiB;MAC/D,MAAMH,KAAK,GAAGI,IAAI,CAACC,OAAO,CAACC,GAAG,CAC3BC,IAAS,IACR,IAAIV,QAAQ,CAAC;QACXW,EAAE,EAAED,IAAI,CAACC,EAAE;QACXC,IAAI,EAAEF,IAAI,CAACE,IAAI;QACfC,IAAI,EAAEH,IAAI,CAACG,IAAI;QACfC,MAAM,EAAEJ,IAAI,CAACI,MAAM;QACnBC,KAAK,EAAEL,IAAI,CAACK;MACd,CAAC,CACL,CAAC;MACD,OAAO,IAAId,gBAAgB,CAACE,KAAK,CAAC;IACpC,CAAC,CAAC,OAAOa,CAAC,EAAE;MACV,IAAIA,CAAC,YAAYjB,iBAAiB,EAAE;QAClCD,OAAO,CAACmB,KAAK,CAAC,CAAC;MACjB;MACA,MAAMD,CAAC;IACT;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}