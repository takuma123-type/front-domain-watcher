{"ast":null,"code":"import { Storage } from \"../infrastructure/Storage\";\nimport { InvlalidSessionTokenError as InvalidSessionTokenError, UsersRepository, UnauthorizedError } from \"../infrastructure/repositories\";\nimport { UserItem } from \"../models/presentation/UserItem\";\nexport class FetchUsersInput {}\nexport class FetchUsersOutput {\n  constructor(params) {\n    this.users = void 0;\n    this.users = params.users;\n  }\n}\nexport class FetchUsersUsecase {\n  static async fetch(usersRepository, sessionToken) {\n    const usecase = new FetchUsersUsecase();\n    const output = await usecase.fetch();\n    return output.users;\n  }\n  constructor(input = new FetchUsersInput()) {\n    this.input = void 0;\n    this.input = input;\n  }\n  async fetch() {\n    const sessionToken = Storage.restoreSessionToken();\n    if (!sessionToken) {\n      return Promise.reject(new InvalidSessionTokenError());\n    }\n    try {\n      const data = await new UsersRepository().fetch(sessionToken);\n      return new FetchUsersOutput({\n        users: data.results.map(user => {\n          return new UserItem({\n            id: user.id,\n            code: user.code,\n            name: user.name,\n            status: user.status,\n            email: user.email\n          });\n        })\n      });\n    } catch (e) {\n      if (e instanceof UnauthorizedError) {\n        Storage.clear();\n      }\n      throw e;\n    }\n  }\n}","map":{"version":3,"names":["Storage","InvlalidSessionTokenError","InvalidSessionTokenError","UsersRepository","UnauthorizedError","UserItem","FetchUsersInput","FetchUsersOutput","constructor","params","users","FetchUsersUsecase","fetch","usersRepository","sessionToken","usecase","output","input","restoreSessionToken","Promise","reject","data","results","map","user","id","code","name","status","email","e","clear"],"sources":["/usr/src/app/admin_front/src/usecases/FetchUsersUsecase.tsx"],"sourcesContent":["import { Storage } from \"../infrastructure/Storage\";\nimport {\n  InvlalidSessionTokenError as InvalidSessionTokenError,\n  UsersRepository,\n  UnauthorizedError,\n} from \"../infrastructure/repositories\";\nimport { UserItem } from \"../models/presentation/UserItem\";\n\nexport class FetchUsersInput {}\n\nexport class FetchUsersOutput {\n  readonly users: UserItem[];\n\n  constructor(params: { users: UserItem[] }) {\n    this.users = params.users;\n  }\n}\n\nexport class FetchUsersUsecase {\n  static async fetch(\n    usersRepository: UsersRepository,\n    sessionToken: string\n  ): Promise<UserItem[]> {\n    const usecase = new FetchUsersUsecase();\n    const output = await usecase.fetch();\n    return output.users;\n  }\n\n  readonly input: FetchUsersInput;\n\n  constructor(input: FetchUsersInput = new FetchUsersInput()) {\n    this.input = input;\n  }\n\n  async fetch(): Promise<FetchUsersOutput> {\n    const sessionToken = Storage.restoreSessionToken();\n    if (!sessionToken) {\n      return Promise.reject(new InvalidSessionTokenError());\n    }\n\n    try {\n      const data = await new UsersRepository().fetch(sessionToken);\n      return new FetchUsersOutput({\n        users: data.results.map((user: any) => {\n          return new UserItem({\n            id: user.id,\n            code: user.code,\n            name: user.name,\n            status: user.status,\n            email: user.email,\n          });\n        }),\n      });\n    } catch (e) {\n      if (e instanceof UnauthorizedError) {\n        Storage.clear();\n      }\n      throw e;\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,2BAA2B;AACnD,SACEC,yBAAyB,IAAIC,wBAAwB,EACrDC,eAAe,EACfC,iBAAiB,QACZ,gCAAgC;AACvC,SAASC,QAAQ,QAAQ,iCAAiC;AAE1D,OAAO,MAAMC,eAAe,CAAC;AAE7B,OAAO,MAAMC,gBAAgB,CAAC;EAG5BC,WAAWA,CAACC,MAA6B,EAAE;IAAA,KAFlCC,KAAK;IAGZ,IAAI,CAACA,KAAK,GAAGD,MAAM,CAACC,KAAK;EAC3B;AACF;AAEA,OAAO,MAAMC,iBAAiB,CAAC;EAC7B,aAAaC,KAAKA,CAChBC,eAAgC,EAChCC,YAAoB,EACC;IACrB,MAAMC,OAAO,GAAG,IAAIJ,iBAAiB,CAAC,CAAC;IACvC,MAAMK,MAAM,GAAG,MAAMD,OAAO,CAACH,KAAK,CAAC,CAAC;IACpC,OAAOI,MAAM,CAACN,KAAK;EACrB;EAIAF,WAAWA,CAACS,KAAsB,GAAG,IAAIX,eAAe,CAAC,CAAC,EAAE;IAAA,KAFnDW,KAAK;IAGZ,IAAI,CAACA,KAAK,GAAGA,KAAK;EACpB;EAEA,MAAML,KAAKA,CAAA,EAA8B;IACvC,MAAME,YAAY,GAAGd,OAAO,CAACkB,mBAAmB,CAAC,CAAC;IAClD,IAAI,CAACJ,YAAY,EAAE;MACjB,OAAOK,OAAO,CAACC,MAAM,CAAC,IAAIlB,wBAAwB,CAAC,CAAC,CAAC;IACvD;IAEA,IAAI;MACF,MAAMmB,IAAI,GAAG,MAAM,IAAIlB,eAAe,CAAC,CAAC,CAACS,KAAK,CAACE,YAAY,CAAC;MAC5D,OAAO,IAAIP,gBAAgB,CAAC;QAC1BG,KAAK,EAAEW,IAAI,CAACC,OAAO,CAACC,GAAG,CAAEC,IAAS,IAAK;UACrC,OAAO,IAAInB,QAAQ,CAAC;YAClBoB,EAAE,EAAED,IAAI,CAACC,EAAE;YACXC,IAAI,EAAEF,IAAI,CAACE,IAAI;YACfC,IAAI,EAAEH,IAAI,CAACG,IAAI;YACfC,MAAM,EAAEJ,IAAI,CAACI,MAAM;YACnBC,KAAK,EAAEL,IAAI,CAACK;UACd,CAAC,CAAC;QACJ,CAAC;MACH,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV,IAAIA,CAAC,YAAY1B,iBAAiB,EAAE;QAClCJ,OAAO,CAAC+B,KAAK,CAAC,CAAC;MACjB;MACA,MAAMD,CAAC;IACT;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}