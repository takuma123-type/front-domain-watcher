{"ast":null,"code":"// FetchUsersUsecase.tsx\nimport { Storage } from \"../infrastructure/Storage\";\nimport { UnauthorizedError } from \"../infrastructure/repositories\";\nimport { UserItem } from \"../models/presentation/UserItem\";\nexport class FetchUsersOutput {\n  constructor(users) {\n    this.users = void 0;\n    this.users = users;\n    console.log(\"FetchUsersOutput constructor - users:\", this.users);\n  }\n}\nexport class FetchUsersUsecase {\n  constructor(usersRepository) {\n    this.usersRepository = void 0;\n    this.usersRepository = usersRepository;\n  }\n  async fetch() {\n    const sessionToken = Storage.restoreSessionToken() || \"temporaryToken\";\n    try {\n      var _response$data, _response$data$result;\n      const usersCell = await this.usersRepository.fetch(sessionToken);\n      const formattedUsers = usersCell.map(user => new UserItem(user));\n      const response = await this.usersRepository.fetch(sessionToken);\n      console.log(\"Full Fetched Response:\", JSON.stringify(response, null, 2));\n      const users = (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$result = _response$data.results) === null || _response$data$result === void 0 ? void 0 : _response$data$result.map(user => new UserItem({\n        id: user.id,\n        code: user.code,\n        name: user.name,\n        status: user.status,\n        email: user.email\n      }));\n      console.log(\"users:\", users === null || users === void 0 ? void 0 : users.map(user => user.name));\n      return new FetchUsersOutput(users || []);\n    } catch (e) {\n      console.error(\"Error in FetchUsersUsecase.fetch:\", e);\n      if (e instanceof UnauthorizedError) {\n        Storage.clear();\n      }\n      throw e;\n    }\n  }\n}","map":{"version":3,"names":["Storage","UnauthorizedError","UserItem","FetchUsersOutput","constructor","users","console","log","FetchUsersUsecase","usersRepository","fetch","sessionToken","restoreSessionToken","_response$data","_response$data$result","usersCell","formattedUsers","map","user","response","JSON","stringify","data","results","id","code","name","status","email","e","error","clear"],"sources":["/usr/src/app/admin_front/src/usecases/FetchUsersUsecase.tsx"],"sourcesContent":["// FetchUsersUsecase.tsx\nimport { Storage } from \"../infrastructure/Storage\";\nimport {\n  InvlalidSessionTokenError,\n  UsersRepository,\n  UnauthorizedError,\n} from \"../infrastructure/repositories\";\nimport { UserItem } from \"../models/presentation/UserItem\";\n\nexport class FetchUsersOutput {\n  readonly users: UserItem[];\n\n  constructor(users: UserItem[]) {\n    this.users = users;\n    console.log(\"FetchUsersOutput constructor - users:\", this.users);\n  }\n}\n\nexport class FetchUsersUsecase {\n  public usersRepository: UsersRepository;\n\n  constructor(usersRepository: UsersRepository) {\n    this.usersRepository = usersRepository;\n  }\n\n  async fetch(): Promise<FetchUsersOutput> {\n    const sessionToken = Storage.restoreSessionToken() || \"temporaryToken\";\n\n    try {\n      const usersCell = await this.usersRepository.fetch(sessionToken);\n      const formattedUsers = usersCell.map((user: any) => new UserItem(user));\n\n      const response = await this.usersRepository.fetch(sessionToken);\n      console.log(\"Full Fetched Response:\", JSON.stringify(response, null, 2));\n      const users = response.data?.results?.map(\n        (user: any) =>\n          new UserItem({\n            id: user.id,\n            code: user.code,\n            name: user.name,\n            status: user.status,\n            email: user.email,\n          })\n      );\n      console.log(\n        \"users:\",\n        users?.map((user: { name: any }) => user.name)\n      );\n      return new FetchUsersOutput(users || []);\n    } catch (e) {\n      console.error(\"Error in FetchUsersUsecase.fetch:\", e);\n      if (e instanceof UnauthorizedError) {\n        Storage.clear();\n      }\n      throw e;\n    }\n  }\n}\n"],"mappings":"AAAA;AACA,SAASA,OAAO,QAAQ,2BAA2B;AACnD,SAGEC,iBAAiB,QACZ,gCAAgC;AACvC,SAASC,QAAQ,QAAQ,iCAAiC;AAE1D,OAAO,MAAMC,gBAAgB,CAAC;EAG5BC,WAAWA,CAACC,KAAiB,EAAE;IAAA,KAFtBA,KAAK;IAGZ,IAAI,CAACA,KAAK,GAAGA,KAAK;IAClBC,OAAO,CAACC,GAAG,CAAC,uCAAuC,EAAE,IAAI,CAACF,KAAK,CAAC;EAClE;AACF;AAEA,OAAO,MAAMG,iBAAiB,CAAC;EAG7BJ,WAAWA,CAACK,eAAgC,EAAE;IAAA,KAFvCA,eAAe;IAGpB,IAAI,CAACA,eAAe,GAAGA,eAAe;EACxC;EAEA,MAAMC,KAAKA,CAAA,EAA8B;IACvC,MAAMC,YAAY,GAAGX,OAAO,CAACY,mBAAmB,CAAC,CAAC,IAAI,gBAAgB;IAEtE,IAAI;MAAA,IAAAC,cAAA,EAAAC,qBAAA;MACF,MAAMC,SAAS,GAAG,MAAM,IAAI,CAACN,eAAe,CAACC,KAAK,CAACC,YAAY,CAAC;MAChE,MAAMK,cAAc,GAAGD,SAAS,CAACE,GAAG,CAAEC,IAAS,IAAK,IAAIhB,QAAQ,CAACgB,IAAI,CAAC,CAAC;MAEvE,MAAMC,QAAQ,GAAG,MAAM,IAAI,CAACV,eAAe,CAACC,KAAK,CAACC,YAAY,CAAC;MAC/DL,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEa,IAAI,CAACC,SAAS,CAACF,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;MACxE,MAAMd,KAAK,IAAAQ,cAAA,GAAGM,QAAQ,CAACG,IAAI,cAAAT,cAAA,wBAAAC,qBAAA,GAAbD,cAAA,CAAeU,OAAO,cAAAT,qBAAA,uBAAtBA,qBAAA,CAAwBG,GAAG,CACtCC,IAAS,IACR,IAAIhB,QAAQ,CAAC;QACXsB,EAAE,EAAEN,IAAI,CAACM,EAAE;QACXC,IAAI,EAAEP,IAAI,CAACO,IAAI;QACfC,IAAI,EAAER,IAAI,CAACQ,IAAI;QACfC,MAAM,EAAET,IAAI,CAACS,MAAM;QACnBC,KAAK,EAAEV,IAAI,CAACU;MACd,CAAC,CACL,CAAC;MACDtB,OAAO,CAACC,GAAG,CACT,QAAQ,EACRF,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEY,GAAG,CAAEC,IAAmB,IAAKA,IAAI,CAACQ,IAAI,CAC/C,CAAC;MACD,OAAO,IAAIvB,gBAAgB,CAACE,KAAK,IAAI,EAAE,CAAC;IAC1C,CAAC,CAAC,OAAOwB,CAAC,EAAE;MACVvB,OAAO,CAACwB,KAAK,CAAC,mCAAmC,EAAED,CAAC,CAAC;MACrD,IAAIA,CAAC,YAAY5B,iBAAiB,EAAE;QAClCD,OAAO,CAAC+B,KAAK,CAAC,CAAC;MACjB;MACA,MAAMF,CAAC;IACT;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}